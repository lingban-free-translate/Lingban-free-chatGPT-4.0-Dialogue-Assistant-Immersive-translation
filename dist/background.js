"use strict";var Le=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function nt(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ge={exports:{}};/** @license
 * eventsource.js
 * Available under MIT License (MIT)
 * https://github.com/Yaffle/EventSource/
 */(function(n,f){(function(c){var b=c.setTimeout,x=c.clearTimeout,h=c.XMLHttpRequest,R=c.XDomainRequest,Q=c.ActiveXObject,T=c.EventSource,D=c.document,ne=c.Promise,z=c.fetch,W=c.Response,$=c.TextDecoder,X=c.TextEncoder,B=c.AbortController;if(typeof window<"u"&&typeof D<"u"&&!("readyState"in D)&&D.body==null&&(D.readyState="loading",window.addEventListener("load",function(r){D.readyState="complete"},!1)),h==null&&Q!=null&&(h=function(){return new Q("Microsoft.XMLHTTP")}),Object.create==null&&(Object.create=function(r){function t(){}return t.prototype=r,new t}),Date.now||(Date.now=function(){return new Date().getTime()}),B==null){var he=z;z=function(r,t){var d=t.signal;return he(r,{headers:t.headers,credentials:t.credentials,cache:t.cache}).then(function(a){var m=a.body.getReader();return d._reader=m,d._aborted&&d._reader.cancel(),{status:a.status,statusText:a.statusText,headers:a.headers,body:{getReader:function(){return m}}}})},B=function(){this.signal={_reader:null,_aborted:!1},this.abort=function(){this.signal._reader!=null&&this.signal._reader.cancel(),this.signal._aborted=!0}}}function oe(){this.bitsNeeded=0,this.codePoint=0}oe.prototype.decode=function(r){function t(v,S,l){if(l===1)return v>=128>>S&&v<<S<=2047;if(l===2)return v>=2048>>S&&v<<S<=55295||v>=57344>>S&&v<<S<=65535;if(l===3)return v>=65536>>S&&v<<S<=1114111;throw new Error}function d(v,S){if(v===6*1)return S>>6>15?3:S>31?2:1;if(v===6*2)return S>15?3:2;if(v===6*3)return 3;throw new Error}for(var a=65533,m="",p=this.bitsNeeded,g=this.codePoint,M=0;M<r.length;M+=1){var O=r[M];p!==0&&(O<128||O>191||!t(g<<6|O&63,p-6,d(p,g)))&&(p=0,g=a,m+=String.fromCharCode(g)),p===0?(O>=0&&O<=127?(p=0,g=O):O>=192&&O<=223?(p=6*1,g=O&31):O>=224&&O<=239?(p=6*2,g=O&15):O>=240&&O<=247?(p=6*3,g=O&7):(p=0,g=a),p!==0&&!t(g,p,d(p,g))&&(p=0,g=a)):(p-=6,g=g<<6|O&63),p===0&&(g<=65535?m+=String.fromCharCode(g):(m+=String.fromCharCode(55296+(g-65535-1>>10)),m+=String.fromCharCode(56320+(g-65535-1&1023))))}return this.bitsNeeded=p,this.codePoint=g,m};var Ne=function(){try{return new $().decode(new X().encode("test"),{stream:!0})==="test"}catch(r){console.debug("TextDecoder does not support streaming option. Using polyfill instead: "+r)}return!1};($==null||X==null||!Ne())&&($=oe);var _=function(){};function k(r){this.withCredentials=!1,this.readyState=0,this.status=0,this.statusText="",this.responseText="",this.onprogress=_,this.onload=_,this.onerror=_,this.onreadystatechange=_,this._contentType="",this._xhr=r,this._sendTimeout=0,this._abort=_}k.prototype.open=function(r,t){this._abort(!0);var d=this,a=this._xhr,m=1,p=0;this._abort=function(l){d._sendTimeout!==0&&(x(d._sendTimeout),d._sendTimeout=0),(m===1||m===2||m===3)&&(m=4,a.onload=_,a.onerror=_,a.onabort=_,a.onprogress=_,a.onreadystatechange=_,a.abort(),p!==0&&(x(p),p=0),l||(d.readyState=4,d.onabort(null),d.onreadystatechange())),m=0};var g=function(){if(m===1){var l=0,u="",P=void 0;if("contentType"in a)l=200,u="OK",P=a.contentType;else try{l=a.status,u=a.statusText,P=a.getResponseHeader("Content-Type")}catch{l=0,u="",P=void 0}l!==0&&(m=2,d.readyState=2,d.status=l,d.statusText=u,d._contentType=P,d.onreadystatechange())}},M=function(){if(g(),m===2||m===3){m=3;var l="";try{l=a.responseText}catch{}d.readyState=3,d.responseText=l,d.onprogress()}},O=function(l,u){if((u==null||u.preventDefault==null)&&(u={preventDefault:_}),M(),m===1||m===2||m===3){if(m=4,p!==0&&(x(p),p=0),d.readyState=4,l==="load")d.onload(u);else if(l==="error")d.onerror(u);else if(l==="abort")d.onabort(u);else throw new TypeError;d.onreadystatechange()}},v=function(l){a!=null&&(a.readyState===4?(!("onload"in a)||!("onerror"in a)||!("onabort"in a))&&O(a.responseText===""?"error":"load",l):a.readyState===3?"onprogress"in a||M():a.readyState===2&&g())},S=function(){p=b(function(){S()},500),a.readyState===3&&M()};"onload"in a&&(a.onload=function(l){O("load",l)}),"onerror"in a&&(a.onerror=function(l){O("error",l)}),"onabort"in a&&(a.onabort=function(l){O("abort",l)}),"onprogress"in a&&(a.onprogress=M),"onreadystatechange"in a&&(a.onreadystatechange=function(l){v(l)}),("contentType"in a||!("ontimeout"in h.prototype))&&(t+=(t.indexOf("?")===-1?"?":"&")+"padding=true"),a.open(r,t,!0),"readyState"in a&&(p=b(function(){S()},0))},k.prototype.abort=function(){this._abort(!1)},k.prototype.getResponseHeader=function(r){return this._contentType},k.prototype.setRequestHeader=function(r,t){var d=this._xhr;"setRequestHeader"in d&&d.setRequestHeader(r,t)},k.prototype.getAllResponseHeaders=function(){return this._xhr.getAllResponseHeaders!=null&&this._xhr.getAllResponseHeaders()||""},k.prototype.send=function(){if((!("ontimeout"in h.prototype)||!("sendAsBinary"in h.prototype)&&!("mozAnon"in h.prototype))&&D!=null&&D.readyState!=null&&D.readyState!=="complete"){var r=this;r._sendTimeout=b(function(){r._sendTimeout=0,r.send()},4);return}var t=this._xhr;"withCredentials"in t&&(t.withCredentials=this.withCredentials);try{t.send(void 0)}catch(d){throw d}};function be(r){return r.replace(/[A-Z]/g,function(t){return String.fromCharCode(t.charCodeAt(0)+32)})}function fe(r){for(var t=Object.create(null),d=r.split(`\r
`),a=0;a<d.length;a+=1){var m=d[a],p=m.split(": "),g=p.shift(),M=p.join(": ");t[be(g)]=M}this._map=t}fe.prototype.get=function(r){return this._map[be(r)]},h!=null&&h.HEADERS_RECEIVED==null&&(h.HEADERS_RECEIVED=2);function xe(){}xe.prototype.open=function(r,t,d,a,m,p,g){r.open("GET",m);var M=0;r.onprogress=function(){var v=r.responseText,S=v.slice(M);M+=S.length,d(S)},r.onerror=function(v){v.preventDefault(),a(new Error("NetworkError"))},r.onload=function(){a(null)},r.onabort=function(){a(null)},r.onreadystatechange=function(){if(r.readyState===h.HEADERS_RECEIVED){var v=r.status,S=r.statusText,l=r.getResponseHeader("Content-Type"),u=r.getAllResponseHeaders();t(v,S,l,new fe(u))}},r.withCredentials=p;for(var O in g)Object.prototype.hasOwnProperty.call(g,O)&&r.setRequestHeader(O,g[O]);return r.send(),r};function o(r){this._headers=r}o.prototype.get=function(r){return this._headers.get(r)};function y(){}y.prototype.open=function(r,t,d,a,m,p,g){var M=null,O=new B,v=O.signal,S=new $;return z(m,{headers:g,credentials:p?"include":"same-origin",signal:v,cache:"no-store"}).then(function(l){return M=l.body.getReader(),t(l.status,l.statusText,l.headers.get("Content-Type"),new o(l.headers)),new ne(function(u,P){var Me=function(){M.read().then(function(V){if(V.done)u(void 0);else{var j=S.decode(V.value,{stream:!0});d(j),Me()}}).catch(function(V){P(V)})};Me()})}).catch(function(l){if(l.name!=="AbortError")return l}).then(function(l){a(l)}),{abort:function(){M!=null&&M.cancel(),O.abort()}}};function A(){this._listeners=Object.create(null)}function I(r){b(function(){throw r},0)}A.prototype.dispatchEvent=function(r){r.target=this;var t=this._listeners[r.type];if(t!=null)for(var d=t.length,a=0;a<d;a+=1){var m=t[a];try{typeof m.handleEvent=="function"?m.handleEvent(r):m.call(this,r)}catch(p){I(p)}}},A.prototype.addEventListener=function(r,t){r=String(r);var d=this._listeners,a=d[r];a==null&&(a=[],d[r]=a);for(var m=!1,p=0;p<a.length;p+=1)a[p]===t&&(m=!0);m||a.push(t)},A.prototype.removeEventListener=function(r,t){r=String(r);var d=this._listeners,a=d[r];if(a!=null){for(var m=[],p=0;p<a.length;p+=1)a[p]!==t&&m.push(a[p]);m.length===0?delete d[r]:d[r]=m}};function J(r){this.type=r,this.target=void 0}function _e(r,t){J.call(this,r),this.data=t.data,this.lastEventId=t.lastEventId}_e.prototype=Object.create(J.prototype);function ue(r,t){J.call(this,r),this.status=t.status,this.statusText=t.statusText,this.headers=t.headers}ue.prototype=Object.create(J.prototype);function Pe(r,t){J.call(this,r),this.error=t.error}Pe.prototype=Object.create(J.prototype);var Oe=-1,ee=0,le=1,Y=2,Te=-1,te=0,Ce=1,me=2,re=3,ve=/^text\/event\-stream(;.*)?$/i,e=1e3,Se=18e6,w=function(r,t){var d=r==null?t:parseInt(r,10);return d!==d&&(d=t),ce(d)},ce=function(r){return Math.min(Math.max(r,e),Se)},G=function(r,t,d){try{typeof t=="function"&&t.call(r,d)}catch(a){I(a)}};function s(r,t){A.call(this),t=t||{},this.onopen=void 0,this.onmessage=void 0,this.onerror=void 0,this.url=void 0,this.readyState=void 0,this.withCredentials=void 0,this.headers=void 0,this._close=void 0,i(this,r,t)}function Ae(){return h!=null&&"withCredentials"in h.prototype||R==null?new h:new R}var C=z!=null&&W!=null&&"body"in W.prototype;function i(r,t,d){t=String(t);var a=!!d.withCredentials,m=d.lastEventIdQueryParameterName||"lastEventId",p=ce(1e3),g=w(d.heartbeatTimeout,45e3),M="",O=p,v=!1,S=0,l=d.headers||{},u=d.Transport,P=C&&u==null?void 0:new k(u!=null?new u:Ae()),Me=u!=null&&typeof u!="string"?new u:P==null?new y:new xe,V=void 0,j=0,Z=Oe,Ee="",Ie="",ie="",Fe="",H=te,Be=0,pe=0,tt=function(L,F,K,q){if(Z===ee)if(L===200&&K!=null&&ve.test(K)){Z=le,v=Date.now(),O=p,r.readyState=le;var U=new ue("open",{status:L,statusText:F,headers:q});r.dispatchEvent(U),G(r,r.onopen,U)}else{var N="";L!==200?(F&&(F=F.replace(/\s+/g," ")),N="EventSource's response has a status "+L+" "+F+" that is not 200. Aborting the connection."):N="EventSource's response has a Content-Type specifying an unsupported type: "+(K==null?"-":K.replace(/\s+/g," "))+". Aborting the connection.",We();var U=new ue("error",{status:L,statusText:F,headers:q});r.dispatchEvent(U),G(r,r.onerror,U),console.error(N)}},rt=function(L){if(Z===le){for(var F=-1,K=0;K<L.length;K+=1){var q=L.charCodeAt(K);(q===10||q===13)&&(F=K)}var U=(F!==-1?Fe:"")+L.slice(0,F+1);Fe=(F===-1?Fe:"")+L.slice(F+1),L!==""&&(v=Date.now(),S+=L.length);for(var N=0;N<U.length;N+=1){var q=U.charCodeAt(N);if(H===Te&&q===10)H=te;else if(H===Te&&(H=te),q===13||q===10){if(H!==te){H===Ce&&(pe=N+1);var ae=U.slice(Be,pe-1),se=U.slice(pe+(pe<N&&U.charCodeAt(pe)===32?1:0),N);ae==="data"?(Ee+=`
`,Ee+=se):ae==="id"?Ie=se:ae==="event"?ie=se:ae==="retry"?(p=w(se,p),O=p):ae==="heartbeatTimeout"&&(g=w(se,g),j!==0&&(x(j),j=b(function(){Re()},g)))}if(H===te){if(Ee!==""){M=Ie,ie===""&&(ie="message");var ge=new _e(ie,{data:Ee.slice(1),lastEventId:Ie});if(r.dispatchEvent(ge),ie==="open"?G(r,r.onopen,ge):ie==="message"?G(r,r.onmessage,ge):ie==="error"&&G(r,r.onerror,ge),Z===Y)return}Ee="",ie=""}H=q===13?Te:te}else H===te&&(Be=N,H=Ce),H===Ce?q===58&&(pe=N+1,H=me):H===me&&(H=re)}}},Ue=function(L){if(Z===le||Z===ee){Z=Oe,j!==0&&(x(j),j=0),j=b(function(){Re()},O),O=ce(Math.min(p*16,O*2)),r.readyState=ee;var F=new Pe("error",{error:L});r.dispatchEvent(F),G(r,r.onerror,F),L!=null&&console.error(L)}},We=function(){Z=Y,V!=null&&(V.abort(),V=void 0),j!==0&&(x(j),j=0),r.readyState=Y},Re=function(){if(j=0,Z!==Oe){if(!v&&V!=null)Ue(new Error("No activity within "+g+" milliseconds. "+(Z===ee?"No response received.":S+" chars received.")+" Reconnecting.")),V!=null&&(V.abort(),V=void 0);else{var L=Math.max((v||Date.now())+g-Date.now(),1);v=!1,j=b(function(){Re()},L)}return}v=!1,S=0,j=b(function(){Re()},g),Z=ee,Ee="",ie="",Ie=M,Fe="",Be=0,pe=0,H=te;var F=t;if(t.slice(0,5)!=="data:"&&t.slice(0,5)!=="blob:"&&M!==""){var K=t.indexOf("?");F=K===-1?t:t.slice(0,K+1)+t.slice(K+1).replace(/(?:^|&)([^=&]*)(?:=[^&]*)?/g,function(se,ge){return ge===m?"":se}),F+=(t.indexOf("?")===-1?"?":"&")+m+"="+encodeURIComponent(M)}var q=r.withCredentials,U={};U.Accept="text/event-stream";var N=r.headers;if(N!=null)for(var ae in N)Object.prototype.hasOwnProperty.call(N,ae)&&(U[ae]=N[ae]);try{V=Me.open(P,tt,rt,Ue,F,q,U)}catch(se){throw We(),se}};r.url=t,r.readyState=ee,r.withCredentials=a,r.headers=l,r._close=We,Re()}s.prototype=Object.create(A.prototype),s.prototype.CONNECTING=ee,s.prototype.OPEN=le,s.prototype.CLOSED=Y,s.prototype.close=function(){this._close()},s.CONNECTING=ee,s.OPEN=le,s.CLOSED=Y,s.prototype.withCredentials=void 0;var E=T;h!=null&&(T==null||!("withCredentials"in T.prototype))&&(E=s),function(r){{var t=r(f);t!==void 0&&(n.exports=t)}}(function(r){r.EventSourcePolyfill=s,r.NativeEventSource=T,r.EventSource=E})})(typeof globalThis>"u"?typeof window<"u"?window:typeof self<"u"?self:Le:globalThis)})(Ge,Ge.exports);var ot=Ge.exports,De={exports:{}};/*!
 * Platform.js v1.3.6
 * Copyright 2014-2020 Benjamin Tan
 * Copyright 2011-2013 John-David Dalton
 * Available under MIT license
 */De.exports;(function(n,f){(function(){var c={function:!0,object:!0},b=c[typeof window]&&window||this,x=f,h=n&&!n.nodeType&&n,R=x&&h&&typeof Le=="object"&&Le;R&&(R.global===R||R.window===R||R.self===R)&&(b=R);var Q=Math.pow(2,53)-1,T=/\bOpera/,D=Object.prototype,ne=D.hasOwnProperty,z=D.toString;function W(o){return o=String(o),o.charAt(0).toUpperCase()+o.slice(1)}function $(o,y,A){var I={"10.0":"10","6.4":"10 Technical Preview","6.3":"8.1","6.2":"8","6.1":"Server 2008 R2 / 7","6.0":"Server 2008 / Vista","5.2":"Server 2003 / XP 64-bit","5.1":"XP","5.01":"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return y&&A&&/^Win/i.test(o)&&!/^Windows Phone /i.test(o)&&(I=I[/[\d.]+$/.exec(o)])&&(o="Windows "+I),o=String(o),y&&A&&(o=o.replace(RegExp(y,"i"),A)),o=B(o.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0]),o}function X(o,y){var A=-1,I=o?o.length:0;if(typeof I=="number"&&I>-1&&I<=Q)for(;++A<I;)y(o[A],A,o);else he(o,y)}function B(o){return o=be(o),/^(?:webOS|i(?:OS|P))/.test(o)?o:W(o)}function he(o,y){for(var A in o)ne.call(o,A)&&y(o[A],A,o)}function oe(o){return o==null?W(o):z.call(o).slice(8,-1)}function Ne(o,y){var A=o!=null?typeof o[y]:"number";return!/^(?:boolean|number|string|undefined)$/.test(A)&&(A=="object"?!!o[y]:!0)}function _(o){return String(o).replace(/([ -])(?!$)/g,"$1?")}function k(o,y){var A=null;return X(o,function(I,J){A=y(A,I,J,o)}),A}function be(o){return String(o).replace(/^ +| +$/g,"")}function fe(o){var y=b,A=o&&typeof o=="object"&&oe(o)!="String";A&&(y=o,o=null);var I=y.navigator||{},J=I.userAgent||"";o||(o=J);var _e=A?!!I.likeChrome:/\bChrome\b/.test(o)&&!/internal|\n/i.test(z.toString()),ue="Object",Pe=A?ue:"ScriptBridgingProxyObject",Oe=A?ue:"Environment",ee=A&&y.java?"JavaPackage":oe(y.java),le=A?ue:"RuntimeObject",Y=/\bJava/.test(ee)&&y.java,Te=Y&&oe(y.environment)==Oe,te=Y?"a":"α",Ce=Y?"b":"β",me=y.document||{},re=y.operamini||y.opera,ve=T.test(ve=A&&re?re["[[Class]]"]:oe(re))?ve:re=null,e,Se=o,w=[],ce=null,G=o==J,s=G&&re&&typeof re.version=="function"&&re.version(),Ae,C=d([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),i=m(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),E=g([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),r=a({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}}),t=p(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function d(S){return k(S,function(l,u){return l||RegExp("\\b"+(u.pattern||_(u))+"\\b","i").exec(o)&&(u.label||u)})}function a(S){return k(S,function(l,u,P){return l||(u[E]||u[/^[a-z]+(?: +[a-z]+\b)*/i.exec(E)]||RegExp("\\b"+_(P)+"(?:\\b|\\w*\\d)","i").exec(o))&&P})}function m(S){return k(S,function(l,u){return l||RegExp("\\b"+(u.pattern||_(u))+"\\b","i").exec(o)&&(u.label||u)})}function p(S){return k(S,function(l,u){var P=u.pattern||_(u);return!l&&(l=RegExp("\\b"+P+"(?:/[\\d.]+|[ \\w.]*)","i").exec(o))&&(l=$(l,P,u.label||u)),l})}function g(S){return k(S,function(l,u){var P=u.pattern||_(u);return!l&&(l=RegExp("\\b"+P+" *\\d+[.\\w_]*","i").exec(o)||RegExp("\\b"+P+" *\\w+-[\\w]*","i").exec(o)||RegExp("\\b"+P+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(o))&&((l=String(u.label&&!RegExp(P,"i").test(u.label)?u.label:l).split("/"))[1]&&!/[\d.]+/.test(l[0])&&(l[0]+=" "+l[1]),u=u.label||u,l=B(l[0].replace(RegExp(P,"i"),u).replace(RegExp("; *(?:"+u+"[_-])?","i")," ").replace(RegExp("("+u+")[-_.]?(\\w)","i"),"$1 $2"))),l})}function M(S){return k(S,function(l,u){return l||(RegExp(u+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(o)||0)[1]||null})}function O(){return this.description||""}if(C&&(C=[C]),/\bAndroid\b/.test(t)&&!E&&(e=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(o))&&(E=be(e[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),r&&!E?E=g([r]):r&&E&&(E=E.replace(RegExp("^("+_(r)+")[-_.\\s]","i"),r+" ").replace(RegExp("^("+_(r)+")[-_.]?(\\w)","i"),r+" $2")),(e=/\bGoogle TV\b/.exec(E))&&(E=e[0]),/\bSimulator\b/i.test(o)&&(E=(E?E+" ":"")+"Simulator"),i=="Opera Mini"&&/\bOPiOS\b/.test(o)&&w.push("running in Turbo/Uncompressed mode"),i=="IE"&&/\blike iPhone OS\b/.test(o)?(e=fe(o.replace(/like iPhone OS/,"")),r=e.manufacturer,E=e.product):/^iP/.test(E)?(i||(i="Safari"),t="iOS"+((e=/ OS ([\d_]+)/i.exec(o))?" "+e[1].replace(/_/g,"."):"")):i=="Konqueror"&&/^Linux\b/i.test(t)?t="Kubuntu":r&&r!="Google"&&(/Chrome/.test(i)&&!/\bMobile Safari\b/i.test(o)||/\bVita\b/.test(E))||/\bAndroid\b/.test(t)&&/^Chrome/.test(i)&&/\bVersion\//i.test(o)?(i="Android Browser",t=/\bAndroid\b/.test(t)?t:"Android"):i=="Silk"?(/\bMobi/i.test(o)||(t="Android",w.unshift("desktop mode")),/Accelerated *= *true/i.test(o)&&w.unshift("accelerated")):i=="UC Browser"&&/\bUCWEB\b/.test(o)?w.push("speed mode"):i=="PaleMoon"&&(e=/\bFirefox\/([\d.]+)\b/.exec(o))?w.push("identifying as Firefox "+e[1]):i=="Firefox"&&(e=/\b(Mobile|Tablet|TV)\b/i.exec(o))?(t||(t="Firefox OS"),E||(E=e[1])):!i||(e=!/\bMinefield\b/i.test(o)&&/\b(?:Firefox|Safari)\b/.exec(i))?(i&&!E&&/[\/,]|^[^(]+?\)/.test(o.slice(o.indexOf(e+"/")+8))&&(i=null),(e=E||r||t)&&(E||r||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(t))&&(i=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(t)?t:e)+" Browser")):i=="Electron"&&(e=(/\bChrome\/([\d.]+)\b/.exec(o)||0)[1])&&w.push("Chromium "+e),s||(s=M(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",_(i),"(?:Firefox|Minefield|NetFront)"])),(e=C=="iCab"&&parseFloat(s)>3&&"WebKit"||/\bOpera\b/.test(i)&&(/\bOPR\b/.test(o)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(o)&&!/^(?:Trident|EdgeHTML)$/.test(C)&&"WebKit"||!C&&/\bMSIE\b/i.test(o)&&(t=="Mac OS"?"Tasman":"Trident")||C=="WebKit"&&/\bPlayStation\b(?! Vita\b)/i.test(i)&&"NetFront")&&(C=[e]),i=="IE"&&(e=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(o)||0)[1])?(i+=" Mobile",t="Windows Phone "+(/\+$/.test(e)?e:e+".x"),w.unshift("desktop mode")):/\bWPDesktop\b/i.test(o)?(i="IE Mobile",t="Windows Phone 8.x",w.unshift("desktop mode"),s||(s=(/\brv:([\d.]+)/.exec(o)||0)[1])):i!="IE"&&C=="Trident"&&(e=/\brv:([\d.]+)/.exec(o))&&(i&&w.push("identifying as "+i+(s?" "+s:"")),i="IE",s=e[1]),G){if(Ne(y,"global"))if(Y&&(e=Y.lang.System,Se=e.getProperty("os.arch"),t=t||e.getProperty("os.name")+" "+e.getProperty("os.version")),Te){try{s=y.require("ringo/engine").version.join("."),i="RingoJS"}catch{(e=y.system)&&e.global.system==y.system&&(i="Narwhal",t||(t=e[0].os||null))}i||(i="Rhino")}else typeof y.process=="object"&&!y.process.browser&&(e=y.process)&&(typeof e.versions=="object"&&(typeof e.versions.electron=="string"?(w.push("Node "+e.versions.node),i="Electron",s=e.versions.electron):typeof e.versions.nw=="string"&&(w.push("Chromium "+s,"Node "+e.versions.node),i="NW.js",s=e.versions.nw)),i||(i="Node.js",Se=e.arch,t=e.platform,s=/[\d.]+/.exec(e.version),s=s?s[0]:null));else oe(e=y.runtime)==Pe?(i="Adobe AIR",t=e.flash.system.Capabilities.os):oe(e=y.phantom)==le?(i="PhantomJS",s=(e=e.version||null)&&e.major+"."+e.minor+"."+e.patch):typeof me.documentMode=="number"&&(e=/\bTrident\/(\d+)/i.exec(o))?(s=[s,me.documentMode],(e=+e[1]+4)!=s[1]&&(w.push("IE "+s[1]+" mode"),C&&(C[1]=""),s[1]=e),s=i=="IE"?String(s[1].toFixed(1)):s[0]):typeof me.documentMode=="number"&&/^(?:Chrome|Firefox)\b/.test(i)&&(w.push("masking as "+i+" "+s),i="IE",s="11.0",C=["Trident"],t="Windows");t=t&&B(t)}if(s&&(e=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(s)||/(?:alpha|beta)(?: ?\d)?/i.exec(o+";"+(G&&I.appMinorVersion))||/\bMinefield\b/i.test(o)&&"a")&&(ce=/b/i.test(e)?"beta":"alpha",s=s.replace(RegExp(e+"\\+?$"),"")+(ce=="beta"?Ce:te)+(/\d+\+?/.exec(e)||"")),i=="Fennec"||i=="Firefox"&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(t))i="Firefox Mobile";else if(i=="Maxthon"&&s)s=s.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(E))E=="Xbox 360"&&(t=null),E=="Xbox 360"&&/\bIEMobile\b/.test(o)&&w.unshift("mobile mode");else if((/^(?:Chrome|IE|Opera)$/.test(i)||i&&!E&&!/Browser|Mobi/.test(i))&&(t=="Windows CE"||/Mobi/i.test(o)))i+=" Mobile";else if(i=="IE"&&G)try{y.external===null&&w.unshift("platform preview")}catch{w.unshift("embedded")}else(/\bBlackBerry\b/.test(E)||/\bBB10\b/.test(o))&&(e=(RegExp(E.replace(/ +/g," *")+"/([.\\d]+)","i").exec(o)||0)[1]||s)?(e=[e,/BB10/.test(o)],t=(e[1]?(E=null,r="BlackBerry"):"Device Software")+" "+e[0],s=null):this!=he&&E!="Wii"&&(G&&re||/Opera/.test(i)&&/\b(?:MSIE|Firefox)\b/i.test(o)||i=="Firefox"&&/\bOS X (?:\d+\.){2,}/.test(t)||i=="IE"&&(t&&!/^Win/.test(t)&&s>5.5||/\bWindows XP\b/.test(t)&&s>8||s==8&&!/\bTrident\b/.test(o)))&&!T.test(e=fe.call(he,o.replace(T,"")+";"))&&e.name&&(e="ing as "+e.name+((e=e.version)?" "+e:""),T.test(i)?(/\bIE\b/.test(e)&&t=="Mac OS"&&(t=null),e="identify"+e):(e="mask"+e,ve?i=B(ve.replace(/([a-z])([A-Z])/g,"$1 $2")):i="Opera",/\bIE\b/.test(e)&&(t=null),G||(s=null)),C=["Presto"],w.push(e));(e=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(o)||0)[1])&&(e=[parseFloat(e.replace(/\.(\d)$/,".0$1")),e],i=="Safari"&&e[1].slice(-1)=="+"?(i="WebKit Nightly",ce="alpha",s=e[1].slice(0,-1)):(s==e[1]||s==(e[2]=(/\bSafari\/([\d.]+\+?)/i.exec(o)||0)[1]))&&(s=null),e[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(o)||0)[1],e[0]==537.36&&e[2]==537.36&&parseFloat(e[1])>=28&&C=="WebKit"&&(C=["Blink"]),!G||!_e&&!e[1]?(C&&(C[1]="like Safari"),e=(e=e[0],e<400?1:e<500?2:e<526?3:e<533?4:e<534?"4+":e<535?5:e<537?6:e<538?7:e<601?8:e<602?9:e<604?10:e<606?11:e<608?12:"12")):(C&&(C[1]="like Chrome"),e=e[1]||(e=e[0],e<530?1:e<532?2:e<532.05?3:e<533?4:e<534.03?5:e<534.07?6:e<534.1?7:e<534.13?8:e<534.16?9:e<534.24?10:e<534.3?11:e<535.01?12:e<535.02?"13+":e<535.07?15:e<535.11?16:e<535.19?17:e<536.05?18:e<536.1?19:e<537.01?20:e<537.11?"21+":e<537.13?23:e<537.18?24:e<537.24?25:e<537.36?26:C!="Blink"?"27":"28")),C&&(C[1]+=" "+(e+=typeof e=="number"?".x":/[.+]/.test(e)?"":"+")),i=="Safari"&&(!s||parseInt(s)>45)?s=e:i=="Chrome"&&/\bHeadlessChrome/i.test(o)&&w.unshift("headless")),i=="Opera"&&(e=/\bzbov|zvav$/.exec(t))?(i+=" ",w.unshift("desktop mode"),e=="zvav"?(i+="Mini",s=null):i+="Mobile",t=t.replace(RegExp(" *"+e+"$"),"")):i=="Safari"&&/\bChrome\b/.exec(C&&C[1])?(w.unshift("desktop mode"),i="Chrome Mobile",s=null,/\bOS X\b/.test(t)?(r="Apple",t="iOS 4.3+"):t=null):/\bSRWare Iron\b/.test(i)&&!s&&(s=M("Chrome")),s&&s.indexOf(e=/[\d.]+$/.exec(t))==0&&o.indexOf("/"+e+"-")>-1&&(t=be(t.replace(e,""))),t&&t.indexOf(i)!=-1&&!RegExp(i+" OS").test(t)&&(t=t.replace(RegExp(" *"+_(i)+" *"),"")),C&&!/\b(?:Avant|Nook)\b/.test(i)&&(/Browser|Lunascape|Maxthon/.test(i)||i!="Safari"&&/^iOS/.test(t)&&/\bSafari\b/.test(C[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(i)&&C[1])&&(e=C[C.length-1])&&w.push(e),w.length&&(w=["("+w.join("; ")+")"]),r&&E&&E.indexOf(r)<0&&w.push("on "+r),E&&w.push((/^on /.test(w[w.length-1])?"":"on ")+E),t&&(e=/ ([\d.+]+)$/.exec(t),Ae=e&&t.charAt(t.length-e[0].length-1)=="/",t={architecture:32,family:e&&!Ae?t.replace(e[0],""):t,version:e?e[1]:null,toString:function(){var S=this.version;return this.family+(S&&!Ae?" "+S:"")+(this.architecture==64?" 64-bit":"")}}),(e=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(Se))&&!/\bi686\b/i.test(Se)?(t&&(t.architecture=64,t.family=t.family.replace(RegExp(" *"+e),"")),i&&(/\bWOW64\b/i.test(o)||G&&/\w(?:86|32)$/.test(I.cpuClass||I.platform)&&!/\bWin64; x64\b/i.test(o))&&w.unshift("32-bit")):t&&/^OS X/.test(t.family)&&i=="Chrome"&&parseFloat(s)>=39&&(t.architecture=64),o||(o=null);var v={};return v.description=o,v.layout=C&&C[0],v.manufacturer=r,v.name=i,v.prerelease=ce,v.product=E,v.ua=o,v.version=i&&s,v.os=t||{architecture:null,family:null,version:null,toString:function(){return"null"}},v.parse=fe,v.toString=O,v.version&&w.unshift(s),v.name&&w.unshift(i),t&&i&&!(t==String(t).split(" ")[0]&&(t==i.split(" ")[0]||E))&&w.push(E?"("+t+")":"on "+t),w.length&&(v.description=w.join(" ")),v}var xe=fe();x&&h?he(xe,function(o,y){x[y]=o}):b.platform=xe}).call(Le)})(De,De.exports);var it=De.exports;const at=nt(it);var st={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const we=()=>!!(chrome!=null&&chrome.runtime),lt=()=>!1,ct=()=>st.VITE_ENV==="test",dt=()=>{var n;return we()?(n=chrome==null?void 0:chrome.runtime.getManifest().version)==null?void 0:n.toString():"dev"},ft=()=>{var c,b,x;const n=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./),f=n?parseInt(n[2],10):!1;return we()?f>=116&&!!((x=(b=(c=chrome==null?void 0:chrome.runtime)==null?void 0:c.getManifest)==null?void 0:b.call(c))!=null&&x.side_panel):!1};async function ut(){var n;try{const f=await fetch((n=chrome.runtime)==null?void 0:n.getURL("configs.json"));if(!f.ok)throw new Error("Network response was not ok.");return await f.json()}catch(f){console.error("Could not fetch config:",f)}}const pt=async()=>{let n="dev";return we()&&(n=(await ut()).channel),n},ht="storageChange";if(!we()){const n=localStorage.setItem;localStorage.setItem=function(f,c){const b=localStorage.getItem(f);if(n.apply(this,arguments),b!==c){const x=new CustomEvent(ht,{detail:{key:f,oldValue:JSON.parse(b),newValue:JSON.parse(c)}});window.dispatchEvent(x)}}}const bt=n=>{const f=Array.isArray(n);if(n=[].concat(n),we())return new Promise((b,x)=>{chrome.storage.local.get(n,h=>{b(f?h:h==null?void 0:h[n])})});const c={};return console.log("key: ",n),n.forEach(b=>{c[b]=localStorage.getItem(b)?JSON.parse(localStorage.getItem(b)):null}),console.log("data: ",c),Promise.resolve(f?c:c[n[0]])},ye={};we()&&ft();const mt=async(n,f)=>{n.data===void 0&&(n.data={}),n.method=n.method||"post";let c={Token:await bt("Authorization"),v:dt(),A:"plug",B:at.name},b=null;const x=n.method==="get",h=n.method==="sse";if(n.formData?(b=new FormData,Object.keys(n.data).forEach(function(T){b.append(T,n.data[T])})):x||h?n.data&&(n.url+=`?${new URLSearchParams(n.data)}`):(c["Content-Type"]="application/json;charset=UTF-8",b=JSON.stringify(n.data)),h){let T="",D,ne;f&&(T=await new Promise((W,$)=>{chrome.tabs.query({active:!0,currentWindow:!0},function(X){W(X[0].id)})}));const z=new ot.EventSourcePolyfill(n.url,{headers:c});return ye[`${T}-${n.sseType}`]=z,f&&(D=(W,$,X)=>{var B;W.action==="stopSSE"&&((B=ye[`${T}-${n.sseType}`])==null||B.close(),delete ye[`${T}-${n.sseType}`],chrome.runtime.onMessage.removeListener(D),chrome.tabs.onRemoved.removeListener(ne))},chrome.runtime.onMessage.addListener(D),ne=W=>{var $;W===T&&(($=ye[`${T}-${n.sseType}`])==null||$.close(),delete ye[`${T}-${n.sseType}`],T="",chrome.runtime.onMessage.removeListener(D),chrome.tabs.onRemoved.removeListener(ne))},chrome.tabs.onRemoved.addListener(ne)),z.addEventListener("message",W=>{var X;const $=JSON.parse(W.data);f?T&&chrome.tabs.sendMessage(T,{action:"sseMessage",message:$},function(B){if(chrome.runtime.lastError){console.error("Message failed:",chrome.runtime.lastError);return}console.log("Response from content script:",B)}):(X=n.message)==null||X.call(n,{data:$})}),new Promise((W,$)=>{z.addEventListener("error",X=>{var B;console.log("eventSource.onerror: ",X,n),(B=n.close)==null||B.call(n,{}),z.close(),delete ye[`${T}-${n.sseType}`],f&&(chrome.runtime.onMessage.removeListener(D),chrome.tabs.onRemoved.removeListener(ne)),W(X)})})}let R={method:n.method,headers:c,...x?{}:{body:b}},Q=!1;return fetch(n.url,R).then(T=>T.json()).then(T=>(n.done&&n.done(),T.code===vt.OK?(n.success&&n.success(T),Promise.resolve(T.data)):(n.fail&&n.fail(T),Q=!0,Promise.reject(T)))).catch(T=>(console.error("error: ",T),Q?Promise.reject(T):(n.done&&n.done(),n.fail&&n.fail(ke),Promise.reject(ke))))},vt={OUTMODED:-158,LOGIN_EXPIRED:-151,OK:100,ERR_DATA:403,ERR_NO_DATA:301,ERR_LOGOUT:401},ke="网络连接异常，请稍后再试",Ye=`https://${ct()||lt()?"test.":""}ilingban.com`,Ze=`${Ye}/first-install`,St="clickedIcon",Xe="setGlobalDisable",Ve="setFloatShow",Ke="setWebsiteGlobalShow",qe="setSideBarIconPosition",ze="setWebsiteFloatShow",Et="save",gt="load",yt="remove",wt="getUserSettings",xt="openSidePanel",Ot="hasLoadedFloat",Tt="heartbeat",Ct="checkIfContentScriptLoaded",je="hasLoadedSidePane",At="chromeApi",He="sendToContent";function Qe(n,f,c,b){chrome.tabs.query({active:!0,currentWindow:!0},function(x){var h=x[0];chrome.tabs.sendMessage(h.id,{action:n,data:f,contentRequest:b},function(R){chrome.runtime.lastError&&console.info(`消息发送失败-activeTabSendMessage-activeTab.id:${h.id}`,chrome.runtime.lastError,n,f),c==null||c(R)})})}function $e(n,f){chrome.tabs.query({},function(c){for(let b of c)chrome.tabs.sendMessage(b.id,{action:n,data:f},function(x){console.info(`消息发送失败-allTabSendMessage-activeTab.id:${b.id}`,chrome.runtime.lastError)})})}function Je(n,f){chrome.tabs.query({url:`https://${f}/*`},function(c){c.forEach(function(b){chrome.tabs.sendMessage(b.id,{action:n,data:f},function(x){console.info(`消息发送失败-specificTabSendMessage-activeTab.id:${b.id}`,chrome.runtime.lastError)})})})}function Mt(){(chrome.action??chrome.browserAction).onClicked.addListener(f=>{Qe(St,{})})}function Rt(){Mt()}const et=n=>{n.url.includes("https://chromewebstore.google.com")||(n.url&&n.url.startsWith("http://")||n.url.startsWith("https://"))&&(console.log("tab url:",n.url),chrome.scripting?(chrome.scripting.insertCSS({target:{tabId:n.id},files:["content.css"]}),chrome.scripting.executeScript({target:{tabId:n.id},files:["content.js"]})):(chrome.tabs.insertCSS(n.id,{file:"content.css"}),chrome.tabs.executeScript(n.id,{file:"content.js"})))};function _t(n,f){chrome.tabs.sendMessage(n,{action:Ct,contentRequest:He},function(c){chrome.runtime.lastError?(console.log("发送消息时出错:",chrome.runtime.lastError.message),f(!1)):f(c)})}const Pt=()=>{chrome.tabs.onActivated.addListener(({tabId:n})=>{_t(n,f=>{console.log("content.js加载了么？",f),f||(console.log("content.js 没有加载，注入content.js"),chrome.tabs.get(n,et))})})};function It(n){chrome.action?chrome.action.getUserSettings().then(f=>{n(f)}):n({isOnToolbar:!0})}let de=!1;chrome.runtime.onConnect.addListener(function(n){de=!0,console.log("侧边栏打开",n),n.name==="lingbanSidepanel"&&n.onDisconnect.addListener(async()=>{console.log("侧边栏关闭"),de=!1,Qe(je,!1,void 0,He)})});const Ft=(n,f,c)=>{chrome.storage.local.set({[n]:f},()=>{c({success:!0})})},Lt=(n,f)=>{chrome.storage.local.get([].concat(n),c=>{f({success:!0,data:c})})},Dt=(n,f)=>{chrome.storage.local.remove([].concat(n),c=>{f({success:!0,result:c})})},Nt=async(n,f)=>{de=f??!de,console.log("sidePanelOpenState: ",de),de?await chrome.sidePanel.open({tabId:n}):await chrome.sidePanel.setOptions({path:"sidebar/sidebar.html",enabled:!1}),await chrome.sidePanel.setOptions({path:"sidebar/sidebar.html",enabled:!0})},Bt=(n,f,c)=>{const{action:b,key:x,data:h}=n;switch(b){case Et:Ft(x,h,c);break;case gt:Lt(x,c);break;case yt:Dt(x,c);break;case Xe:$e(Xe,h);break;case Ve:$e(Ve,h);break;case Ke:Je(Ke,h);break;case ze:Je(ze,h);break;case qe:$e(qe,h);break;case wt:It(R=>{var Q;R.isOnToolbar&&f.url.includes(Ze)&&chrome.tabs.update(f.tab.id,{url:(Q=chrome.runtime)==null?void 0:Q.getURL("/options/options.html#setup")}),c==null||c(R)});break;case xt:Nt(f.tab.id,h);break;case Ot:console.log("sender.tab",f.tab),f.tab&&chrome.tabs.sendMessage(f.tab.id,{action:je,data:de,contentRequest:He},function(R){chrome.runtime.lastError&&console.info(`消息发送失败-Tab.id:${f.tab.id}`,chrome.runtime.lastError,je,de)});default:console.log("Unknown");break}};chrome.sidePanel.open&&chrome.sidePanel.setPanelBehavior({openPanelOnActionClick:!0}).catch(n=>console.error(n));chrome.runtime.onInstalled.addListener(function(n){if(n.reason==="install")console.log("Extension installed for the first time."),n.reason=="install"&&chrome.windows.getAll({populate:!0},c=>{c.forEach(b=>{b.tabs.forEach(x=>{et(x)})})}),pt().then(c=>{var b;chrome.tabs.create({url:`${Ze}?from=${c}&nextUrl=${encodeURIComponent((b=chrome.runtime)==null?void 0:b.getURL("/options/options.html#setup"))}`},function(x){chrome.tabs.query({active:!0,currentWindow:!0},h=>{var R=h[0];setTimeout(()=>{chrome.tabs.sendMessage(R.id,{action:"install"})},3e3)})})}),console.log("Extension installed for the first time.");else if(n.reason==="update"){var f=chrome.runtime.getManifest().version;console.log("Updated from "+n.previousVersion+" to "+f+"!")}else n.reason==="chrome_update"&&console.log("Chrome updated.")});chrome.runtime.onMessage.addListener(function(n,f,c){const{contentRequest:b}=n;if(b==="apiRequest"){let{config:x}=n;x.method==="sse"&&(x.close=h=>{h.result="close",c(h)}),x.success=h=>{h.result="succ",console.log("succ",h),c(h)},x.fail=h=>{console.log("fail",h),c({result:"fail",msg:h})},mt(x,!0)}return b===At&&Bt(n,f,c),n.action===Tt&&n.ping&&c({pong:!0}),!0});chrome.runtime.setUninstallURL(`${Ye}?uninstall=1`);Rt();Pt();
